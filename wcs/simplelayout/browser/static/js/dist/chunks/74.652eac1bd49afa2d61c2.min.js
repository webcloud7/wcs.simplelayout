(self.webpackChunksimplelayout=self.webpackChunksimplelayout||[]).push([[74],{8590:(e,t,o)=>{"use strict";o.d(t,{Z:()=>s});var l=o(8161);const n={key:0,"aria-label":"Pagination for this listing"},a={class:"pagination"};const r={props:{batching:{type:Object,required:!0,default:()=>null}},methods:{triggerNext(){this.$emit("next",this.batching.next)},triggerPrevious(){this.$emit("previous",this.batching.prev)}}};const s=(0,o(3744).Z)(r,[["render",function(e,t,o,r,s,c){return o.batching?((0,l.openBlock)(),(0,l.createElementBlock)("nav",n,[(0,l.createElementVNode)("ul",a,[(0,l.createElementVNode)("li",{class:(0,l.normalizeClass)(o.batching.prev?"page-item":"page-item disabled")},[(0,l.createElementVNode)("a",{href:"#",onClick:t[0]||(t[0]=(0,l.withModifiers)(((...e)=>c.triggerPrevious&&c.triggerPrevious(...e)),["prevent"])),class:"page-link"}," Previous ")],2),(0,l.createElementVNode)("li",{class:(0,l.normalizeClass)(o.batching.next?"page-item":"page-item disabled")},[(0,l.createElementVNode)("a",{href:"#",onClick:t[1]||(t[1]=(0,l.withModifiers)(((...e)=>c.triggerNext&&c.triggerNext(...e)),["prevent"])),class:"page-link"}," Next ")],2)])])):(0,l.createCommentVNode)("v-if",!0)}]])},3029:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>a});var l=o(8161);const n={components:{BlockStructure:o(1658).Z},props:{actions:{type:Array,required:!0},rowIndex:{type:Number,required:!0},columnIndex:{type:Number,required:!0},blockIndex:{type:Number,required:!0},block:{type:Object,required:!0}}};const a=(0,o(3744).Z)(n,[["render",function(e,t,o,n,a,r){const s=(0,l.resolveComponent)("BlockStructure");return(0,l.openBlock)(),(0,l.createBlock)(s,(0,l.normalizeProps)((0,l.guardReactiveProps)(e.$props)),null,16)}]])},9881:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>a});var l=o(8161);const n={components:{BlockStructure:o(1658).Z},props:{actions:{type:Array,required:!0},rowIndex:{type:Number,required:!0},columnIndex:{type:Number,required:!0},blockIndex:{type:Number,required:!0},block:{type:Object,required:!0}}};const a=(0,o(3744).Z)(n,[["render",function(e,t,o,n,a,r){const s=(0,l.resolveComponent)("BlockStructure");return(0,l.openBlock)(),(0,l.createBlock)(s,(0,l.normalizeProps)((0,l.guardReactiveProps)(e.$props)),null,16)}]])},1798:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>u});var l=o(8161);const n={class:"table-responsive"},a={class:"table table-hover"},r=(0,l.createElementVNode)("thead",null,[(0,l.createElementVNode)("tr",null,[(0,l.createElementVNode)("th",null,"Type"),(0,l.createElementVNode)("th",null,"Title"),(0,l.createElementVNode)("th",null,"Size"),(0,l.createElementVNode)("th",null,"Modified")])],-1),s=["href"],c=["href"];var d=o(1658),i=o(8590);const m={components:{BlockStructure:d.Z,Pagination:i.Z},props:{actions:{type:Array,required:!0},rowIndex:{type:Number,required:!0},columnIndex:{type:Number,required:!0},blockIndex:{type:Number,required:!0},block:{type:Object,required:!0}},data:()=>({data:{items:[],batching:null}}),created(){this.fetchData()},watch:{"block.modified"(){this.fetchData()}},methods:{async fetchData(){const e=await this.axios.get(this.block.computed_query);this.data=e.data},async fetchNext(e){const t=await this.axios.get(e);this.data=t.data},async fetchPrevious(e){const t=await this.axios.get(e);this.data=t.data}}};const u=(0,o(3744).Z)(m,[["render",function(e,t,o,d,i,m){const u=(0,l.resolveComponent)("Pagination"),p=(0,l.resolveComponent)("BlockStructure");return(0,l.openBlock)(),(0,l.createBlock)(p,(0,l.normalizeProps)((0,l.guardReactiveProps)(e.$props)),{body:(0,l.withCtx)((()=>[(0,l.createTextVNode)(" total "+(0,l.toDisplayString)(i.data.items_total)+" ",1),(0,l.createElementVNode)("div",n,[(0,l.createElementVNode)("table",a,[r,(0,l.createElementVNode)("tbody",null,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(i.data.items,(e=>((0,l.openBlock)(),(0,l.createElementBlock)("tr",{key:e.UID},["Image"===e["@type"]?((0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,{key:0},[(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.image["content-type"]),1),(0,l.createElementVNode)("td",null,[(0,l.createElementVNode)("a",{href:e.image.download},(0,l.toDisplayString)(e.title),9,s)]),(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.image.size),1)],64)):(0,l.createCommentVNode)("v-if",!0),"File"===e["@type"]?((0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,{key:1},[(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.file["content-type"]),1),(0,l.createElementVNode)("td",null,[(0,l.createElementVNode)("a",{href:e.file.download},(0,l.toDisplayString)(e.title),9,c)]),(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.file.size),1)],64)):(0,l.createCommentVNode)("v-if",!0),(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.modified),1)])))),128))])])]),i.data.batching?((0,l.openBlock)(),(0,l.createBlock)(u,{key:0,onNext:m.fetchNext,onPrevious:m.fetchPrevious,batching:i.data.batching},null,8,["onNext","onPrevious","batching"])):(0,l.createCommentVNode)("v-if",!0)])),_:1},16)}]])},4770:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>u});var l=o(8161);const n={class:"table-responsive"},a={class:"table table-hover"},r=(0,l.createElementVNode)("thead",null,[(0,l.createElementVNode)("tr",null,[(0,l.createElementVNode)("th",null,"Type"),(0,l.createElementVNode)("th",null,"Title"),(0,l.createElementVNode)("th",null,"Size"),(0,l.createElementVNode)("th",null,"Modified")])],-1),s=["href"],c=["href"];var d=o(1658),i=o(8590);const m={components:{BlockStructure:d.Z,Pagination:i.Z},props:{actions:{type:Array,required:!0},rowIndex:{type:Number,required:!0},columnIndex:{type:Number,required:!0},blockIndex:{type:Number,required:!0},block:{type:Object,required:!0}},data:()=>({data:{items:[],batching:null}}),created(){this.fetchData()},watch:{"block.modified"(){this.fetchData()}},methods:{async fetchData(){const e=await this.axios.get(this.block.computed_query);this.data=e.data},async fetchNext(e){const t=await this.axios.get(e);this.data=t.data},async fetchPrevious(e){const t=await this.axios.get(e);this.data=t.data}}};const u=(0,o(3744).Z)(m,[["render",function(e,t,o,d,i,m){const u=(0,l.resolveComponent)("Pagination"),p=(0,l.resolveComponent)("BlockStructure");return(0,l.openBlock)(),(0,l.createBlock)(p,(0,l.normalizeProps)((0,l.guardReactiveProps)(e.$props)),{body:(0,l.withCtx)((()=>[(0,l.createTextVNode)(" total "+(0,l.toDisplayString)(i.data.items_total)+" ",1),(0,l.createElementVNode)("div",n,[(0,l.createElementVNode)("table",a,[r,(0,l.createElementVNode)("tbody",null,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(i.data.items,(e=>((0,l.openBlock)(),(0,l.createElementBlock)("tr",{key:e.UID},["Image"===e["@type"]?((0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,{key:0},[(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.image["content-type"]),1),(0,l.createElementVNode)("td",null,[(0,l.createElementVNode)("a",{href:e.image.download},(0,l.toDisplayString)(e.title),9,s)]),(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.image.size),1)],64)):(0,l.createCommentVNode)("v-if",!0),"File"===e["@type"]?((0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,{key:1},[(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.file["content-type"]),1),(0,l.createElementVNode)("td",null,[(0,l.createElementVNode)("a",{href:e.file.download},(0,l.toDisplayString)(e.title),9,c)]),(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.file.size),1)],64)):(0,l.createCommentVNode)("v-if",!0),(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.modified),1)])))),128))])])]),i.data.batching?((0,l.openBlock)(),(0,l.createBlock)(u,{key:0,onNext:m.fetchNext,onPrevious:m.fetchPrevious,batching:i.data.batching},null,8,["onNext","onPrevious","batching"])):(0,l.createCommentVNode)("v-if",!0)])),_:1},16)}]])},9008:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>i});var l=o(8161);const n={class:"table-responsive"},a={class:"table table-hover"},r=(0,l.createElementVNode)("thead",null,[(0,l.createElementVNode)("tr",null,[(0,l.createElementVNode)("th",null,"Date"),(0,l.createElementVNode)("th",null,"Title"),(0,l.createElementVNode)("th",null,"Modified")])],-1);var s=o(1658),c=o(8590);const d={components:{BlockStructure:s.Z,Pagination:c.Z},props:{actions:{type:Array,required:!0},rowIndex:{type:Number,required:!0},columnIndex:{type:Number,required:!0},blockIndex:{type:Number,required:!0},block:{type:Object,required:!0}},data:()=>({data:{items:[],batching:null}}),created(){this.fetchData()},watch:{"block.modified"(){this.fetchData()}},methods:{async fetchData(){const e=await this.axios.get(this.block.computed_query);this.data=e.data},async fetchNext(e){const t=await this.axios.get(e);this.data=t.data},async fetchPrevious(e){const t=await this.axios.get(e);this.data=t.data}}};const i=(0,o(3744).Z)(d,[["render",function(e,t,o,s,c,d){const i=(0,l.resolveComponent)("Pagination"),m=(0,l.resolveComponent)("BlockStructure");return(0,l.openBlock)(),(0,l.createBlock)(m,(0,l.normalizeProps)((0,l.guardReactiveProps)(e.$props)),{body:(0,l.withCtx)((()=>[(0,l.createTextVNode)(" total "+(0,l.toDisplayString)(c.data.items_total)+" ",1),(0,l.createElementVNode)("div",n,[(0,l.createElementVNode)("table",a,[r,(0,l.createElementVNode)("tbody",null,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(c.data.items,(e=>((0,l.openBlock)(),(0,l.createElementBlock)("tr",{key:e.UID},[(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.news_date),1),(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.title),1),(0,l.createElementVNode)("td",null,(0,l.toDisplayString)(e.modified),1)])))),128))])])]),c.data.batching?((0,l.openBlock)(),(0,l.createBlock)(i,{key:0,onNext:d.fetchNext,onPrevious:d.fetchPrevious,batching:c.data.batching},null,8,["onNext","onPrevious","batching"])):(0,l.createCommentVNode)("v-if",!0)])),_:1},16)}]])},2863:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>c});var l=o(8161);const n={class:"card-img-top sl-card-image","aria-hidden":"true"},a=["href"];var r=o(6695);const s={components:{BlockStructure:o(1658).Z},props:{actions:{type:Array,required:!0},rowIndex:{type:Number,required:!0},columnIndex:{type:Number,required:!0},blockIndex:{type:Number,required:!0},block:{type:Object,required:!0}},setup:()=>({sl:(0,r.B)()})};const c=(0,o(3744).Z)(s,[["render",function(e,t,o,r,s,c){const d=(0,l.resolveComponent)("BlockStructure");return(0,l.openBlock)(),(0,l.createBlock)(d,(0,l.normalizeProps)((0,l.guardReactiveProps)(e.$props)),{top:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",n,[(0,l.createElementVNode)("div",{class:"sl-placeholder-video",style:(0,l.normalizeStyle)(`background-image: url(${this.sl.portalURL}/iconresolver/camera-video)`)},null,4)])])),body:(0,l.withCtx)((()=>[(0,l.createElementVNode)("a",{href:o.block.video_url},(0,l.toDisplayString)(o.block.video_url),9,a)])),_:1},16)}]])},1658:(e,t,o)=>{"use strict";o.d(t,{Z:()=>V});var l=o(8161);const n={class:"card"},a={key:0,class:"card-img-top sl-card-image"},r=["src","alt"],s={key:0,class:"card-body"},c={class:"card-text"},d=["innerHTML"];const i={class:"container d-flex justify-content-between"},m={class:""},u={class:"btn-group btn-group-xs sl-add-block-controls"},p={key:0,class:"btn btn-secondary btn-sm sl-handle sl-move-button"},h=(0,l.createElementVNode)("span",{class:"sr-only"},"Move",-1),k=["id"],b=[(0,l.createElementVNode)("span",null,"Actions",-1)],y=["aria-labelledby"],g=["onClick","data-row","data-col","data-block"];var B=o(6695);const f={class:"card-title"},v={class:"position-relative d-inline-block pe-2"},N={key:0,class:"h6 text-black text-opacity-50"};const x={props:{block:{type:Object,required:!0}}};var w=o(3744);const E={components:{BlockTitle:(0,w.Z)(x,[["render",function(e,t,o,n,a,r){return(0,l.openBlock)(),(0,l.createElementBlock)("h4",f,[(0,l.createElementVNode)("div",v,[(0,l.createTextVNode)((0,l.toDisplayString)(o.block.title)+" ",1),o.block.show_title?(0,l.createCommentVNode)("v-if",!0):((0,l.openBlock)(),(0,l.createElementBlock)("span",N,"(hidden title)"))])])}]])},props:{actions:{type:Array,required:!0},rowIndex:{type:Number,required:!0},columnIndex:{type:Number,required:!0},blockIndex:{type:Number,required:!0},block:{type:Object,required:!0}},setup:()=>({sl:(0,B.B)()}),computed:{moveIcon(){return{src:`${this.sl.portalURL}/iconresolver/arrows-move`,alt:"Move block",width:"20",style:"filter: invert(1)"}},dropdownId(){return`blockDropdownMenu_${this.columnIndex}_${this.rowIndex}`},dropdownIdMobile(){return`${this.dropdownId}_mobile_menu`}}},I={components:{BlockControls:(0,w.Z)(E,[["render",function(e,t,o,n,a,r){const s=(0,l.resolveComponent)("BlockTitle");return(0,l.openBlock)(),(0,l.createElementBlock)("div",i,[(0,l.createElementVNode)("div",m,[(0,l.renderSlot)(e.$slots,"title",{},(()=>[o.block.title?((0,l.openBlock)(),(0,l.createBlock)(s,{key:0,block:o.block},null,8,["block"])):(0,l.createCommentVNode)("v-if",!0)]))]),(0,l.createElementVNode)("div",u,[o.blockIndex>-1?((0,l.openBlock)(),(0,l.createElementBlock)("button",p,[(0,l.createElementVNode)("img",(0,l.normalizeProps)((0,l.guardReactiveProps)(r.moveIcon)),null,16),h])):(0,l.createCommentVNode)("v-if",!0),(0,l.createElementVNode)("button",{class:"btn btn-success btn-sm dropdown-toggle",type:"button",id:r.dropdownId,"data-bs-toggle":"dropdown","data-bs-auto-close":"true","aria-expanded":"false"},b,8,k),(0,l.createElementVNode)("ul",{class:"dropdown-menu dropdown-menu-end","aria-labelledby":r.dropdownId},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(o.actions,(e=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{key:e.label},[e.enabled(o.rowIndex,o.columnIndex,o.blockIndex)?((0,l.openBlock)(),(0,l.createElementBlock)("a",{key:0,class:"dropdown-item",onClick:(0,l.withModifiers)(e.action,["prevent","stop"]),"data-row":o.rowIndex,"data-col":o.columnIndex,"data-block":o.blockIndex,href:"#"},(0,l.toDisplayString)(e.label),9,g)):(0,l.createCommentVNode)("v-if",!0)])))),128))],8,y)])])}]])},props:{actions:{type:Array,required:!0},rowIndex:{type:Number,required:!0},columnIndex:{type:Number,required:!0},blockIndex:{type:Number,required:!0},block:{type:Object,required:!0}}},V=(0,w.Z)(I,[["render",function(e,t,o,i,m,u){const p=(0,l.resolveComponent)("BlockControls");return(0,l.openBlock)(),(0,l.createElementBlock)("div",n,[(0,l.createVNode)(p,(0,l.normalizeProps)((0,l.guardReactiveProps)(e.$props)),null,16),(0,l.renderSlot)(e.$slots,"top",{},(()=>[o.block.image?((0,l.openBlock)(),(0,l.createElementBlock)("div",a,[(0,l.createElementVNode)("img",{src:o.block.image.scales.great.download,alt:o.block.image_alt_text},null,8,r)])):(0,l.createCommentVNode)("v-if",!0)])),0!==Object.keys(o.block).length?((0,l.openBlock)(),(0,l.createElementBlock)("div",s,[(0,l.createElementVNode)("div",c,[(0,l.renderSlot)(e.$slots,"body",{},(()=>[o.block.text?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:0,innerHTML:o.block.text.data},null,8,d)):(0,l.createCommentVNode)("v-if",!0)]))])])):(0,l.createCommentVNode)("v-if",!0)])}]])},8134:(e,t,o)=>{var l={"./Block.vue":3029,"./BlockFallbackView.vue":9881,"./FileListingBlock.vue":1798,"./ImageListingBlock.vue":4770,"./NewsListingBlock.vue":9008,"./VideoBlock.vue":2863};function n(e){var t=a(e);return o(t)}function a(e){if(!o.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}n.keys=function(){return Object.keys(l)},n.resolve=a,e.exports=n,n.id=8134},1074:(e,t,o)=>{"use strict";o.r(t);var l=o(8161);const n={class:"row"},a={key:0,class:"sl-block"},r={key:0,class:"sl-block sl-block-placeholder"};const s={key:0},c={key:1};const d={components:{BlockFallbackView:o(9881).default},props:{actions:{type:Array,required:!0},rowIndex:{type:Number,required:!0},columnIndex:{type:Number,required:!0},blockIndex:{type:Number,required:!0},block:{type:Object,required:!0}},methods:{hasBlockViewComponent(){return this.block["@type"]in this.$blockviews}},computed:{getBlockViewComponentByName(){return this.$blockviews[this.block["@type"]]}}};var i=o(3744);const m=(0,i.Z)(d,[["render",function(e,t,o,n,a,r){const d=(0,l.resolveComponent)("BlockFallbackView");return void 0!==r.getBlockViewComponentByName?((0,l.openBlock)(),(0,l.createElementBlock)("div",s,[((0,l.openBlock)(),(0,l.createBlock)((0,l.resolveDynamicComponent)(r.getBlockViewComponentByName),(0,l.normalizeProps)((0,l.guardReactiveProps)(e.$props)),null,16))])):((0,l.openBlock)(),(0,l.createElementBlock)("div",c,[(0,l.createVNode)(d,(0,l.normalizeProps)((0,l.guardReactiveProps)(e.$props)),null,16)]))}]]),u={class:"btn-group btn-group-xs"},p=["id"],h=[(0,l.createElementVNode)("span",{"aria-haspopup":"true",class:"caret"},null,-1),(0,l.createElementVNode)("span",{class:"sr-only"},"Toggle Dropdown",-1)],k=["aria-labelledby"],b=["onClick"];var y=o(9484),g=o(6695);const B={props:{index:{type:Number,required:!0}},setup:()=>({sl:(0,g.B)()}),data:()=>({rows:[{cols:2,label:"2-column row (50%)"},{cols:3,label:"3-column row (33%)"},{cols:4,label:"4-column row (25%)"}]}),methods:{createRow(e){this.sl.addRowToLayout((0,y.O)(e),this.index)}},computed:{dropdownId(){return`dropdownMenu_${this.index}`}}},f=(0,i.Z)(B,[["render",function(e,t,o,n,a,r){return(0,l.openBlock)(),(0,l.createElementBlock)("div",{class:"sl-add-row-controls",style:(0,l.normalizeStyle)("z-index:"+(1e3-2*o.index))},[(0,l.createElementVNode)("div",u,[(0,l.createElementVNode)("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=()=>r.createRow(1))}," + "),(0,l.createElementVNode)("button",{class:"btn btn-secondary dropdown-toggle",type:"button",id:r.dropdownId,"data-bs-toggle":"dropdown","data-bs-auto-close":"true","aria-expanded":"false"},h,8,p),(0,l.createElementVNode)("ul",{class:"dropdown-menu","aria-labelledby":r.dropdownId},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(a.rows,(e=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{key:e.cols},[(0,l.createElementVNode)("a",{class:"dropdown-item",onClick:(0,l.withModifiers)((()=>r.createRow(e.cols)),["prevent"]),href:"#"},(0,l.toDisplayString)(e.label),9,b)])))),128))],8,k)])],4)}]]),v={class:"btn-group btn-group-xs"},N=["id"],x=["aria-labelledby"],w=["onClick"],E={class:"btn-group btn-group-xs sl-row-controls"};function I(e){const t=[{cols:12,label:"100%"},{cols:9,label:"75%"},{cols:6,label:"50%"},{cols:4,label:"33%"},{cols:3,label:"25%"}];return void 0!==e?t.reduce(((e,t)=>({...e,[t.cols]:t.label})),{}):t}const V={setup:()=>({sl:(0,g.B)()}),props:{rowIndex:{type:Number,required:!0},colIndex:{type:Number,required:!0},currentWidth:{type:Number,required:!1},right:{type:Boolean,required:!1,default:()=>!1}},methods:{createCol(){this.sl.addColumnToRow((0,y.$)(1),this.rowIndex,this.colIndex)},removeCol(){this.sl.removeRowFromLayout(this.rowIndex,this.colIndex)},newWidth(e){this.sl.setNewWidthOnColumn(this.rowIndex,this.colIndex,e)}},computed:{widths:()=>I(),widthsMapping:()=>I(!0),dropdownId(){return`dropdownMenu_${this.colIndex}_${this.rowIndex}`},cssClasses(){let e="sl-col-controls";return this.right&&(e+=" right"),e},hasBlocks(){const e=this.sl.layouts.items[this.rowIndex].items[this.colIndex].items.length;return Boolean(e)}}},C=(0,i.Z)(V,[["render",function(e,t,o,n,a,r){return(0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,null,[o.currentWidth?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:0,class:"sl-remove-col-controls",style:(0,l.normalizeStyle)("z-index:"+(999-2*o.rowIndex))},[(0,l.createElementVNode)("div",v,[r.hasBlocks?(0,l.createCommentVNode)("v-if",!0):((0,l.openBlock)(),(0,l.createElementBlock)("button",{key:0,class:"btn btn-xs btn-danger",type:"button",onClick:t[0]||(t[0]=(...e)=>r.removeCol&&r.removeCol(...e))}," Remove column ")),(0,l.createElementVNode)("button",{class:"btn dropdown-toggle btn-primary btn-xs",type:"button",id:r.dropdownId,"data-bs-toggle":"dropdown","data-bs-auto-close":"true","aria-expanded":"false"}," Width: "+(0,l.toDisplayString)(r.widthsMapping[o.currentWidth]),9,N),(0,l.createElementVNode)("ul",{class:"dropdown-menu","aria-labelledby":r.dropdownId},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(r.widths,(e=>((0,l.openBlock)(),(0,l.createElementBlock)("li",{key:e.cols},[(0,l.createElementVNode)("a",{class:"dropdown-item",onClick:()=>r.newWidth(e.cols),href:"#"},(0,l.toDisplayString)(e.label),9,w)])))),128))],8,x)])],4)):(0,l.createCommentVNode)("v-if",!0),(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)(r.cssClasses)},[(0,l.createElementVNode)("div",E,[(0,l.createElementVNode)("button",{type:"button",class:"btn btn-secondary sl-col-add-button",onClick:t[1]||(t[1]=()=>r.createCol())}," + ")])],2)],64)}]]);const M={class:"modal fade sl-base-modal",tabindex:"-1","aria-labelledby":"modal-title","aria-hidden":"true",ref:"sl-base-modal"},S={class:"modal-dialog modal-dialog-scrollable modal-xl"},q={class:"modal-content"},A={class:"modal-header"},D={class:"modal-title",id:"modal-title"},$={class:"modal-body"},_=(0,l.createElementVNode)("div",{class:"modal-footer"},[(0,l.createElementVNode)("button",{id:"form-buttons-cancel",name:"form.buttons.cancel",class:"btn btn-secondary standalone",value:"Cancel"}," Close ")],-1);var L=o(8910),P=o(9269),R=o.n(P);const O={name:"base-modal",props:{cleanUpBody:{type:Boolean,required:!1,default:()=>!0},storeAction:{type:Function,required:!1,default:()=>()=>null},modalOptions:{type:Object,required:!1,default:()=>({backdrop:"static",keyboard:!1,focus:!1})}},setup:()=>({sl:(0,g.B)()}),data:()=>({modal:null,position:{}}),mounted(){const e=this.$refs["sl-base-modal"];this.modal=new(R().fn.modal.Constructor)(e,this.modalOptions)},methods:{async openModal(e,t){const o=await this.axioshtml.get(e);this.position=t,this.replaceModalContent(o),this.handleFormButtons(),this.modal.show()},async openFormModal(e,t){const o=await this.axioshtml.get(e);this.position=t,this.replaceModalContent(o),this.handleFormButtons(),window.initReferenceWidget(),this.modal.show()},async handleSubmit(e){e.preventDefault(),this.handleTinyMCE();const t=this.modal._element.querySelector("#form"),o=t.getAttribute("action"),l=e.currentTarget;let n=new FormData(t);n.append(l.getAttribute("name"),l.value),n.append("expand","types");const a=await this.axioshtml.post(o,n,{headers:{"Content-Type":"multipart/form-data",Accept:"text/html,application/json"}}),r="application/json"===a.headers["content-type"],s=204===a.status;if(r||s){const e=a.data;this.storeAction(this.position,e),this.cleanBody(),this.modal.hide()}else this.replaceModalContent(a),this.handleFormButtons()},replaceModalContent(e){const t=(new DOMParser).parseFromString(e.data,"text/html"),o=this.modal._element.querySelector(".modal-body");this.modal._element.querySelector(".modal-title").innerHTML=t.querySelector("h1").innerHTML,t.querySelector("h1").remove(),o.innerHTML=t.getElementById("content").innerHTML,L.Z.scan(o)},handleFormButtons(){const e=this.modal._element.querySelector("#form");let t=null,o=null;if(e){const l=e.querySelector("#form-buttons-save"),n=e.querySelector("#form-buttons-Delete");t=e.querySelector("#form-buttons-cancel")||e.querySelector("#form-buttons-Cancel"),o=l||n,o.addEventListener("click",this.handleSubmit),e.addEventListener("submit",this.handleSubmit)}else t=this.modal._element.querySelector("#form-buttons-cancel");t.addEventListener("click",this.handleCancel);const l=this.modal._element.querySelector(".modal-footer");for(;l.firstChild;)l.removeChild(l.firstChild);o&&l.appendChild(o),l.appendChild(t)},handleCancel(e){e.preventDefault(),e.stopPropagation(),this.cleanBody(),this.modal.hide()},cleanBody(){if(!this.cleanUpBody)return;const e=this.modal._element.querySelector(".modal-body");for(;e.firstChild;)e.removeChild(e.firstChild)},handleTinyMCE(){[...this.modal._element.querySelectorAll("textarea")].forEach((e=>{tinyMCE.get(e.id).save()}))}}},F=(0,i.Z)(O,[["render",function(e,t,o,n,a,r){return(0,l.openBlock)(),(0,l.createElementBlock)("div",M,[(0,l.createElementVNode)("div",S,[(0,l.createElementVNode)("div",q,[(0,l.createElementVNode)("div",A,[(0,l.createElementVNode)("h4",D,[(0,l.renderSlot)(e.$slots,"title")])]),(0,l.createElementVNode)("div",$,[(0,l.renderSlot)(e.$slots,"body")]),_])])],512)}]]),T={name:"add-modal",components:{BaseModal:F},setup:()=>({sl:(0,g.B)()}),data:()=>({addableBlocksModal:null}),mounted(){this.addableBlocksModal=this.$refs.modal.modal},methods:{async openAddableBlocksModal(e){const t=e.currentTarget,o={rowIndex:parseInt(t.getAttribute("data-row")),columnIndex:parseInt(t.getAttribute("data-col")),blockIndex:parseInt(t.getAttribute("data-block"))},l=`${this.sl.baseURL}/@@sl-addable-blocks`,n=await this.axioshtml.get(l);this.$refs.modal.replaceModalContent(n),this.$refs.modal.handleFormButtons();[...this.addableBlocksModal._element.querySelector(".modal-body").querySelectorAll("a")].forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),this.$refs.modal.openFormModal(e.getAttribute("href"),o)}))})),this.addableBlocksModal.show()},storeAction(e,t){this.sl.addBlockToColumn(e.rowIndex,e.columnIndex,e.blockIndex+1,t.UID)}}},U=(0,i.Z)(T,[["render",function(e,t,o,n,a,r){const s=(0,l.resolveComponent)("BaseModal");return(0,l.openBlock)(),(0,l.createBlock)(s,{storeAction:r.storeAction,ref:"modal"},null,8,["storeAction"])}]]);const Z={name:"edit-modal",components:{BaseModal:F},setup:()=>({sl:(0,g.B)()}),data:()=>({editBlockModal:null}),mounted(){this.editBlockModal=this.$refs.modal.modal},methods:{async openEditBlockModal(e){const t=e.currentTarget,o={rowIndex:parseInt(t.getAttribute("data-row")),columnIndex:parseInt(t.getAttribute("data-col")),blockIndex:parseInt(t.getAttribute("data-block"))};this.editBlockModal.hide();const l=`${this.getBlockURL(o)}/edit`;this.$refs.modal.openFormModal(l,o),this.editBlockModal.show()},getBlockURL(e){const t=this.sl.layouts.items[e.rowIndex].items[e.columnIndex].items[e.blockIndex];return this.sl.blocks[t]["@id"]},storeAction(e,t){this.sl.modifyBlock(t)}}},z=(0,i.Z)(Z,[["render",function(e,t,o,n,a,r){const s=(0,l.resolveComponent)("BaseModal");return(0,l.openBlock)(),(0,l.createBlock)(s,{storeAction:r.storeAction,ref:"modal"},null,8,["storeAction"])}]]);const j={name:"delete-modal",components:{BaseModal:F},setup:()=>({sl:(0,g.B)()}),data:()=>({deleteBlockModal:null}),mounted(){this.deleteBlockModal=this.$refs.modal.modal},methods:{async openDeleteBlockModal(e){const t=e.currentTarget,o={rowIndex:parseInt(t.getAttribute("data-row")),columnIndex:parseInt(t.getAttribute("data-col")),blockIndex:parseInt(t.getAttribute("data-block"))};this.deleteBlockModal.hide();const l=`${this.getBlockURL(o)}/delete_confirmation`;this.$refs.modal.openFormModal(l,o),this.deleteBlockModal.show()},getBlockURL(e){const t=this.sl.layouts.items[e.rowIndex].items[e.columnIndex].items[e.blockIndex];return this.sl.blocks[t]["@id"]},storeAction(e){this.sl.deleteBlock(e)}}},J=(0,i.Z)(j,[["render",function(e,t,o,n,a,r){const s=(0,l.resolveComponent)("BaseModal");return(0,l.openBlock)(),(0,l.createBlock)(s,{storeAction:r.storeAction,ref:"modal"},null,8,["storeAction"])}]]);const W={name:"info-modal",components:{BaseModal:F},setup:()=>({sl:(0,g.B)()}),data:()=>({infoBlockModal:null,options:{backdrop:!0,keyboard:!1,focus:!1}}),mounted(){this.infoBlockModal=this.$refs.modal.modal},methods:{async openInfoBlockModal(e){const t=e.currentTarget,o={rowIndex:parseInt(t.getAttribute("data-row")),columnIndex:parseInt(t.getAttribute("data-col")),blockIndex:parseInt(t.getAttribute("data-block"))};this.infoBlockModal.hide();const l=`${this.getBlockURL(o)}`;this.$refs.modal.openModal(l)},getBlockURL(e){const t=this.sl.layouts.items[e.rowIndex].items[e.columnIndex].items[e.blockIndex];return this.sl.blocks[t]["@id"]}}},H=(0,i.Z)(W,[["render",function(e,t,o,n,a,r){const s=(0,l.resolveComponent)("BaseModal");return(0,l.openBlock)(),(0,l.createBlock)(s,{modalOptions:a.options,ref:"modal"},null,8,["modalOptions"])}]]),K=(0,l.createTextVNode)("Upload"),G={class:"upload",ref:"upload"};const Q={name:"upload-modal",components:{BaseModal:F},setup:()=>({sl:(0,g.B)()}),data:()=>({editBlockModal:null}),mounted(){this.uploadBlockModal=this.$refs.modal.modal},methods:{async openUploadModal(e){const t=e.currentTarget,o={rowIndex:parseInt(t.getAttribute("data-row")),columnIndex:parseInt(t.getAttribute("data-col")),blockIndex:parseInt(t.getAttribute("data-block"))},l={url:`${this.getBlockURL(o)}/@@fileUpload`,showTitle:!1},n=new window.__patternslib_registry.upload(this.$refs.upload,l);this.uploadBlockModal._element.addEventListener("hide.bs.modal",(()=>{this.reloadBlock(o),n.dropzone.destroy(),n.$el[0].removeChild(n.$el[0].firstChild),console.info(n)})),this.$refs.modal.handleFormButtons(),this.uploadBlockModal.show()},getBlockURL(e){const t=this.sl.layouts.items[e.rowIndex].items[e.columnIndex].items[e.blockIndex];return this.sl.blocks[t]["@id"]},async reloadBlock(e){const t=await this.axios.get(this.getBlockURL(e),{params:{expand:"types"}});this.sl.modifyBlock(t.data)}}},X=(0,i.Z)(Q,[["render",function(e,t,o,n,a,r){const s=(0,l.resolveComponent)("BaseModal");return(0,l.openBlock)(),(0,l.createBlock)(s,{cleanUpBody:!1,ref:"modal"},{title:(0,l.withCtx)((()=>[K])),body:(0,l.withCtx)((()=>[(0,l.createElementVNode)("div",G,null,512)])),_:1},512)}]]);var Y=o(7003);const ee={components:{BlockRenderer:m,RowControls:f,ColControls:C,AddBlockModal:U,EditBlockModal:z,DeleteBlockModal:J,InfoBlockModal:H,UploadModal:X,draggable:o.n(Y)()},setup:()=>({sl:(0,g.B)()}),data(){return{dragging:!1,actions:[{label:"Add",action:this.openAddableBlocksModal,enabled:()=>!0},{label:"Edit",action:this.openEditBlocksModal,enabled:(e,t)=>this.sl.layouts.items[e].items[t].items.length},{label:"Delete",action:this.openDeleteBlocksModal,enabled:(e,t)=>this.sl.layouts.items[e].items[t].items.length},{label:"Upload",action:this.openUploadModal,enabled:(e,t,o)=>{const l=this.sl.layouts.items[e].items[t].items[o];if(!l)return!1;return this.sl.blocks[l]["@components"].types.filter((e=>e.addable)).length}},{label:"Information",action:this.openInfoBlockModal,enabled:(e,t)=>this.sl.layouts.items[e].items[t].items.length},{label:"Contens (Listing)",action:this.gotoFolderContents,enabled:(e,t,o)=>{const l=this.sl.layouts.items[e].items[t].items[o];if(!l)return!1;return this.sl.blocks[l]["@components"].types.filter((e=>e.addable)).length}}]}},created(){this.sl.fetchBlocks()},computed:{draggingClass(){return this.dragging?"sl-dragging":""},dragOptions:()=>({animation:200,disabled:!1,class:"sl-draggable-container",group:"blocks",handle:".sl-handle",ghostClass:"ghost-sl-block"})},methods:{openAddableBlocksModal(e){this.$refs["add-modal"].openAddableBlocksModal(e)},openEditBlocksModal(e){this.$refs["edit-modal"].openEditBlockModal(e)},openDeleteBlocksModal(e){this.$refs["delete-modal"].openDeleteBlockModal(e)},openInfoBlockModal(e){this.$refs["info-modal"].openInfoBlockModal(e)},openUploadModal(e){this.$refs["upload-modal"].openUploadModal(e)},gotoFolderContents(e){const t=e.currentTarget,o=parseInt(t.getAttribute("data-row")),l=parseInt(t.getAttribute("data-col")),n=parseInt(t.getAttribute("data-block")),a=this.sl.layouts.items[o].items[l].items[n];window.open(this.sl.blocks[a]["@id"]+"/folder_contents","_self")},saveLayout:function(){this.sl.modifyLayouts({slblocks_layout:{items:this.sl.layouts.items}}),this.dragging=!1},startDraggingBlock(){this.dragging=!0}}},te=(0,i.Z)(ee,[["render",function(e,t,o,s,c,d){const i=(0,l.resolveComponent)("RowControls"),m=(0,l.resolveComponent)("ColControls"),u=(0,l.resolveComponent)("BlockRenderer"),p=(0,l.resolveComponent)("draggable"),h=(0,l.resolveComponent)("AddBlockModal"),k=(0,l.resolveComponent)("EditBlockModal"),b=(0,l.resolveComponent)("DeleteBlockModal"),y=(0,l.resolveComponent)("InfoBlockModal"),g=(0,l.resolveComponent)("UploadModal");return(0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,null,[(0,l.createElementVNode)("div",{class:(0,l.normalizeClass)(`sl-container ${d.draggingClass}`)},[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(s.sl.layouts.items,((t,o)=>((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:`layout_${o}`,class:"sl-row"},[(0,l.createVNode)(i,{index:o},null,8,["index"]),(0,l.createElementVNode)("div",n,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(t.items,((n,i)=>((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:`column_${i}_${o}`,class:(0,l.normalizeClass)(`sl-col col col-${n.width}`)},[(0,l.createVNode)(m,{rowIndex:o,colIndex:i,currentWidth:parseInt(n.width)},null,8,["rowIndex","colIndex","currentWidth"]),(0,l.createVNode)(p,(0,l.mergeProps)(d.dragOptions,{list:n.items,itemKey:t=>e.element,onEnd:d.saveLayout,onStart:d.startDraggingBlock}),{item:(0,l.withCtx)((({element:e,index:t})=>[e in s.sl.blocks?((0,l.openBlock)(),(0,l.createElementBlock)("div",a,[(0,l.createVNode)(u,{actions:c.actions,block:s.sl.blocks[e],rowIndex:o,columnIndex:i,blockIndex:t},null,8,["actions","block","rowIndex","columnIndex","blockIndex"])])):(0,l.createCommentVNode)("v-if",!0)])),footer:(0,l.withCtx)((()=>[0===n.items.length?((0,l.openBlock)(),(0,l.createElementBlock)("div",r,[(0,l.createVNode)(u,{actions:c.actions,block:{},rowIndex:o,columnIndex:i,blockIndex:-1},null,8,["actions","rowIndex","columnIndex"])])):(0,l.createCommentVNode)("v-if",!0)])),_:2},1040,["list","itemKey","onEnd","onStart"]),t.items.length===i+1?((0,l.openBlock)(),(0,l.createBlock)(m,{key:0,rowIndex:o,colIndex:i+1,right:""},null,8,["rowIndex","colIndex"])):(0,l.createCommentVNode)("v-if",!0)],2)))),128))]),s.sl.layouts.items.length===o+1?((0,l.openBlock)(),(0,l.createBlock)(i,{key:0,index:o+1},null,8,["index"])):(0,l.createCommentVNode)("v-if",!0)])))),128))],2),(0,l.createVNode)(h,{ref:"add-modal"},null,512),(0,l.createVNode)(k,{ref:"edit-modal"},null,512),(0,l.createVNode)(b,{ref:"delete-modal"},null,512),(0,l.createVNode)(y,{ref:"info-modal"},null,512),(0,l.createVNode)(g,{ref:"upload-modal"},null,512)],64)}]]);var oe=o(9931),le=o.n(oe);function ne(){return le().create({headers:{Accept:"application/json","Content-Type":"application/json",Prefer:"return=representation"}})}var ae=o(4382),re=o.n(ae),se=o(3771);const ce={install:e=>{const t=o(8134),l={};t.keys().forEach((e=>{const o=t(e),n=e.split("/").pop().replace(/\.\w+$/,"");l[n]=o.default})),e.config.globalProperties.$blockviews=l}},de=(0,l.createApp)(te);de.use(re(),{axios:ne(),axioshtml:le().create({headers:{Accept:"text/html"}})});const ie=(0,se.createPinia)();ie.use((({store:e})=>{e.axios=ne()})),de.use(ie),de.use(ce),de.mount("#app")},6695:(e,t,o)=>{"use strict";o.d(t,{B:()=>a});var l=o(3771),n=o(9484);const a=(0,l.defineStore)({id:"simplelayoutStore",state:()=>({layouts:{items:[(0,n.O)()]},blocks:{},loading:!1,baseURL:document.body.getAttribute("data-base-url"),baseApiURL:document.body.getAttribute("data-base-url")+"/++api++",portalURL:document.body.getAttribute("data-portal-url"),params:{expand:"types"}}),getters:{},actions:{async fetchBlocks(){this.loading=!0;try{const e=await this.axios.get(this.baseApiURL,{params:this.params});this.blocks=e.data.slblocks;const t=e.data.slblocks_layout;"items"in t&&0!==t.items.length&&(this.layouts=e.data.slblocks_layout)}catch(e){console.info(e)}finally{this.loading=!1}},async modifyLayouts(e){this.loading=!0;try{const t=await this.axios.patch(this.baseApiURL,e,{params:this.params});this.blocks=t.data.slblocks;"items"in t.data.slblocks_layout&&(this.layouts=t.data.slblocks_layout)}catch(e){console.info(e)}finally{this.loading=!1}},async addRowToLayout(e,t){let o=JSON.parse(JSON.stringify(this.layouts.items));o.splice(t,0,e);const l={slblocks_layout:{items:o}};this.modifyLayouts(l)},async removeRowFromLayout(e,t){let o=JSON.parse(JSON.stringify(this.layouts.items));const l=o[e].items;if(1===l.length)o.splice(e,1);else{const e=12/(l.length-1);l.splice(t,1),l.map((t=>t.width=e))}const n={slblocks_layout:{items:o}};this.modifyLayouts(n)},async addColumnToRow(e,t,o){let l=JSON.parse(JSON.stringify(this.layouts.items)),n=l[t].items;const a=12/(n.length+1);n.map((e=>e.width=a)),e.width=a,l[t].items.splice(o,0,e);const r={slblocks_layout:{items:l}};this.modifyLayouts(r)},async addBlockToColumn(e,t,o,l){let n=JSON.parse(JSON.stringify(this.layouts.items));n[e].items[t].items.splice(o,0,l);const a={slblocks_layout:{items:n}};this.modifyLayouts(a)},async setNewWidthOnColumn(e,t,o){let l=JSON.parse(JSON.stringify(this.layouts.items));l[e].items[t].width=o;const n={slblocks_layout:{items:l}};this.modifyLayouts(n)},async modifyBlock(e){this.blocks[e.UID]=e},async deleteBlock(e){let t=JSON.parse(JSON.stringify(this.layouts.items));t[e.rowIndex].items[e.columnIndex].items.splice(e.blockIndex,1);const o={slblocks_layout:{items:t}};this.modifyLayouts(o)}}})},9484:(e,t,o)=>{"use strict";function l(e){return{"@type":"col",width:""+12/parseInt(e),items:[]}}function n(e){return{"@type":"row",items:Array.from(new Array(e),((e,t)=>t)).map((()=>l(e)))}}o.d(t,{$:()=>l,O:()=>n})}}]);
//# sourceMappingURL=74.652eac1bd49afa2d61c2.min.js.map